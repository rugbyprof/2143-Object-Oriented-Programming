# Stage 2 — Getting Started with `nlohmann::json`

## Learning goals

- Include and compile the library.
- Build simple JSON objects in C++.
- Serialize (`dump`) and parse (`parse`) JSON text.

---

## 1️⃣ Setting up the library

`nlohmann::json` is **header-only** — one file, `json.hpp`.

### Option A: local include

Place `json.hpp` in your project folder:

```cpp
#include "json.hpp"
using json = nlohmann::json;
```

### Option B: system include (after vcpkg/homebrew install)

```cpp
#include <nlohmann/json.hpp>
using json = nlohmann::json;
```

Compile normally — no special flags needed:

```bash
g++ main.cpp -std=c++17 -o main
```

---

## 2️⃣ Creating JSON objects

```cpp
#include <iostream>
#include "json.hpp"
using json = nlohmann::json;

int main() {
    json j;                       // empty object {}
    j["name"] = "Artemis";        // key–value
    j["hp"] = 100;                // number
    j["skills"] = {"C++", "Python", "IoT"}; // array

    std::cout << j.dump(4) << std::endl;    // pretty print (4-space indent)
}
```

Output:

```json
{
  "hp": 100,
  "name": "Artemis",
  "skills": ["C++", "Python", "IoT"]
}
```

---

## 3️⃣ Compact vs pretty output

```cpp
std::cout << j.dump()    << std::endl; // compact {"hp":100,"name":"Artemis"}
std::cout << j.dump(4)   << std::endl; // formatted (indent = 4)
```

---

## 4️⃣ Serialization and parsing

### Serialize to string

```cpp
std::string s = j.dump();   // C++ → text
```

### Parse from string

```cpp
json j2 = json::parse(s);   // text → C++
```

If `s` isn’t valid JSON, a `json::parse_error` exception is thrown.

---

## 5️⃣ Read/write files

```cpp
#include <fstream>

// write
std::ofstream("player.json") << j.dump(4);

// read
std::ifstream in("player.json");
json loaded;
in >> loaded;

std::cout << loaded["name"] << std::endl;
```

---

## 6️⃣ Quick checks

| Goal          | Code                     | Note             |
| ------------- | ------------------------ | ---------------- |
| Create empty  | `json j;`                | same as `{}`     |
| Add key/value | `j["hp"] = 100;`         | works like a map |
| Add array     | `j["skills"] = {"C++"};` | list syntax      |
| Print         | `j.dump(4)`              | human-readable   |
| Save          | `ofstream("f") << j;`    | dumps text       |
| Load          | `ifstream("f") >> j;`    | parses text      |

---

## 7️⃣ Micro-exercises

A) **Warm-up:** Create a `json` object for a course:  
`{"code":"CS2143","title":"OOP","credits":3}`  
Pretty-print it.

B) **Practice:** Add an array of student names and print only the first.

C) **File I/O:** Save your object to `course.json`, reload it, and confirm a key’s value.

---

## 8️⃣ Mental model

Think of `json` as a **smart variant** or **dynamic map**:

- Holds strings, numbers, bools, arrays, and objects in one type.
- Lets you treat structured data as if it were native C++ containers.

---

|                   |                   |
| :---------------: | :---------------: |
| [⏮️ Prev](001.md) | [Next ⏭️](003.md) |
